<!-- users-panel.component.html -->
<div class="dashboard-shell">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-brand">

      <div>@{{ adminUsername() || 'ADMIN' }}</div>
    </div>
    <nav class="sidebar-nav">
      <a class="sidebar-link" routerLink="/admin-panel/products" routerLinkActive="is-active">
        <img src="assets/barcode.svg" alt="Productos" width="26" height="26" />Productos
      </a>
      <a class="sidebar-link" routerLink="/admin-panel/sales" routerLinkActive="is-active">
        <img src="assets/money-send.svg" alt="Productos" width="26" height="26" />Ventas

      </a>
      <div class="sidebar-group">
        <!-- Parent acts as toggle only to avoid navigation <-> toggle conflicts -->
        <a class="sidebar-link has-sub" (click)="toggleUsersSubmenu()" role="button"
          aria-expanded="{{ showUsersSubmenu() }}">
          <img src="assets/people.png" alt="Usuarios" width="26" height="26" />Gestión de usuarios
          <img class="submenu-caret" src="assets/arrow-down.png" alt="abrir" width="14" height="14"
            [style.transform]="showUsersSubmenu() ? 'rotate(180deg)' : 'rotate(0deg)'"
            style="transition:transform .18s ease" />
        </a>
        <div *ngIf="showUsersSubmenu()" class="sidebar-sublist">
          <a class="sidebar-sublink" routerLink="/admin-panel/users" routerLinkActive="is-active">
            <img src="assets/people.png" alt="usuarios" width="20" height="20" /> Usuarios
          </a>
          <a class="sidebar-sublink" routerLink="/admin-panel/users/banned" routerLinkActive="is-active">
            <img src="assets/deleteUsuario.png" alt="baneados" width="20" height="20" /> Usuarios baneados
          </a>
        </div>
      </div>
      <a class="sidebar-link" routerLink="/admin-panel/settings" routerLinkActive="is-active">
        <img src="assets/setting-2.png" alt="Productos" width="26" height="26" />Configuración
      </a>
    </nav>
  </aside>

  <!-- Main -->
  <main class="dashboard-main">
    <div class="dashboard-container dashboard-panel">
      <!-- Breadcrumb -->
      <div class="breadcrumb breadcrumb-with-action">
        <div class="breadcrumb-path">
          <span>PANEL</span><span class="breadcrumb-separator">›</span>
          <span style="color:#111827;font-weight:700">{{ sectionLabel() }}</span>
        </div>
        <button class="btn-action toolbar-action" (click)="onToolbarAction()" [attr.aria-label]="actionLabel()">
          <svg viewBox="0 0 24 24">
            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
          {{ actionLabel() }}
        </button>
      </div>
      <!-- Upload product modal (in-panel) -->
      <div class="modal-backdrop" *ngIf="showUploadModal()" (click)="closeUploadModal()">
        <div class="modal" (click)="$event.stopPropagation()">
          <div class="modal-header">
            <!-- <h3>Subir producto</h3> -->
            <button class="modal-close" (click)="closeUploadModal()">✕</button>
          </div>
          <div class="modal-body">
            <!-- Reuse subir-producto component layout -->
            <app-subir-producto></app-subir-producto>
          </div>
        </div>
      </div>
      <!-- Add user modal (in-panel) -->
      <div class="modal-backdrop" *ngIf="showAddUserModal()" (click)="closeAddUserModal()">
        <div class="modal" (click)="$event.stopPropagation()">
          <div class="modal-header">
            <!-- <h3>Agregar usuario</h3> -->
            <button class="modal-close" (click)="closeAddUserModal()">✕</button>
          </div>
          <div class="modal-body">
            <app-add-usuario></app-add-usuario>
          </div>
        </div>
      </div>
      <router-outlet />
    </div><!-- dashboard-panel -->
  </main>
</div>